(this["webpackJsonpdashboard-app"]=this["webpackJsonpdashboard-app"]||[]).push([[0],[,,,,,,,,,,,,,,,function(e,t,a){e.exports=a(32)},,,,,,function(e,t,a){},function(e,t,a){},,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),r=a(14),c=a.n(r),o=(a(21),a(6)),s=a(3),m=a(5),i=(a(22),a(34));var u=function(){const[e,t]=Object(n.useState)(""),[a,r]=Object(n.useState)([]),[c,o]=Object(n.useState)(null),[u,d]=Object(n.useState)([]),[E,p]=Object(n.useState)(null),[h,g]=Object(n.useState)(""),b=Object(s.q)(),f=Object(n.useRef)(null),N=JSON.parse(localStorage.getItem("user"));Object(n.useEffect)(()=>{N?(v(),w()):b("/login")},[N,b]);const v=async()=>{const e=N._id;try{const t=await i.a.get("http://localhost:5000/api/notes/".concat(e));r(t.data)}catch(t){console.error("Error fetching notes:",t)}},w=async()=>{const e=N._id;try{const t=await i.a.get("http://localhost:5000/api/documents/".concat(e));d(t.data)}catch(t){console.error("Error fetching documents:",t)}};return l.a.createElement("div",{className:"home-container"},l.a.createElement("h2",null,"Welcome, ",N.firstName||N.email),l.a.createElement("div",{className:"content-container"},l.a.createElement("div",{className:"notes-section"},l.a.createElement("h3",null,"Notes"),l.a.createElement("textarea",{value:e,onChange:e=>t(e.target.value),placeholder:"Write your note here..."}),l.a.createElement("button",{onClick:async()=>{if(e.trim()){const l=N._id;try{const n=await i.a.post("http://localhost:5000/api/notes",{userId:l,text:e});r([...a,n.data]),t("")}catch(n){console.error("Error saving note:",n)}}}},"Save Note"),l.a.createElement("table",{className:"notes-table"},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null,"Note"),l.a.createElement("th",null,"Actions"))),l.a.createElement("tbody",null,a.map(e=>l.a.createElement("tr",{key:e._id},l.a.createElement("td",null,E===e._id?l.a.createElement("textarea",{value:h,onChange:e=>g(e.target.value)}):l.a.createElement("p",null,e.text)),l.a.createElement("td",null,E===e._id?l.a.createElement(l.a.Fragment,null,l.a.createElement("button",{onClick:()=>(async e=>{if(h.trim())try{200===(await i.a.put("http://localhost:5000/api/notes/".concat(e),{text:h})).status&&(r(a.map(t=>t._id===e?Object(m.a)(Object(m.a)({},t),{},{text:h}):t)),p(null),g(""))}catch(t){console.error("Error updating note:",t)}})(e._id)},"Update"),l.a.createElement("button",{onClick:()=>{p(null),g("")}},"Cancel")):l.a.createElement(l.a.Fragment,null,l.a.createElement("button",{onClick:()=>{return t=e._id,a=e.text,p(t),void g(a);var t,a}},"Edit"),l.a.createElement("button",{onClick:()=>(async e=>{try{await i.a.delete("http://localhost:5000/api/notes/".concat(e)),r(a.filter(t=>t._id!==e))}catch(t){console.error("Error deleting note:",t)}})(e._id)},"Delete")))))))),l.a.createElement("div",{className:"documents-section"},l.a.createElement("h3",null,"Documents"),l.a.createElement("input",{type:"file",onChange:e=>o(e.target.files[0]),ref:f}),l.a.createElement("button",{onClick:async()=>{if(c){const t=new FormData;t.append("file",c),t.append("userId",N._id);try{const e=await i.a.post("http://localhost:5000/api/documents",t,{headers:{"Content-Type":"multipart/form-data"}});d([...u,e.data]),o(null),f.current.value=""}catch(e){console.error("Error uploading document:",e)}}}},"Upload Document"),l.a.createElement("table",{className:"documents-table"},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null,"Document"),l.a.createElement("th",null,"Actions"))),l.a.createElement("tbody",null,u.map(e=>l.a.createElement("tr",{key:e._id},l.a.createElement("td",null,e.fileName),l.a.createElement("td",null,l.a.createElement("button",{onClick:()=>(async(e,t)=>{try{const a=await i.a.get("http://localhost:5000/api/documents/download/".concat(e),{responseType:"blob"}),n=window.URL.createObjectURL(new Blob([a.data])),l=document.createElement("a");l.href=n,l.setAttribute("download",t),document.body.appendChild(l),l.click()}catch(a){console.error("Error downloading file:",a)}})(e._id,e.fileName)},"Download"),l.a.createElement("button",{onClick:()=>(async e=>{try{await i.a.delete("http://localhost:5000/api/documents/".concat(e)),d(u.filter(t=>t._id!==e))}catch(t){console.error("Error deleting document:",t)}})(e._id)},"Delete")))))))))};a(27);var d=function(e){let{setUser:t}=e;const[a,r]=Object(n.useState)(""),[c,o]=Object(n.useState)(""),[m,i]=Object(n.useState)(null),u=Object(s.q)();return l.a.createElement("div",{className:"login-container"},l.a.createElement("h2",null,"Login"),m&&l.a.createElement("p",{className:"error"},m),l.a.createElement("form",{onSubmit:async e=>{e.preventDefault();try{const e=await fetch("http://localhost:5000/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:a,password:c})}),n=await e.json();e.ok?(localStorage.setItem("user",JSON.stringify(n.user)),t(n.user),u("/home")):i(n.msg)}catch(n){console.error(n),i("There was an error logging in!")}}},l.a.createElement("label",null,"Email:"),l.a.createElement("input",{type:"email",value:a,onChange:e=>r(e.target.value),required:!0}),l.a.createElement("label",null,"Password:"),l.a.createElement("input",{type:"password",value:c,onChange:e=>o(e.target.value),required:!0}),l.a.createElement("button",{type:"submit"},"Login")))};a(28);var E=function(){const[e,t]=Object(n.useState)({firstName:"",lastName:"",email:"",contact:"",password:"",confirmPassword:""}),[a,r]=Object(n.useState)({}),c=Object(s.q)(),o=a=>{const{name:n,value:l}=a.target;t(Object(m.a)(Object(m.a)({},e),{},{[n]:l}))};return l.a.createElement("div",{className:"register-form"},l.a.createElement("h2",null,"Register"),l.a.createElement("form",{onSubmit:async t=>{if(t.preventDefault(),(()=>{let t={},a=!0;return e.firstName||(t.firstName="First Name is required",a=!1),e.lastName||(t.lastName="Last Name is required",a=!1),e.email?/\S+@\S+\.\S+/.test(e.email)||(t.email="Email is invalid",a=!1):(t.email="Email is required",a=!1),e.contact?/^\d{10}$/.test(e.contact)||(t.contact="Contact number is invalid",a=!1):(t.contact="Contact number is required",a=!1),e.password?e.password.length<6&&(t.password="Password must be at least 6 characters long",a=!1):(t.password="Password is required",a=!1),e.password!==e.confirmPassword&&(t.confirmPassword="Passwords do not match",a=!1),r(t),a})())try{const t=await fetch("http://localhost:5000/api/auth/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),a=await t.json();t.ok?(alert("Registration Successful!"),c("/login")):alert(a.msg||"Registration failed!")}catch(a){console.error(a),alert("There was an error during registration!")}else alert("Please correct the errors in the form")}},l.a.createElement("div",null,l.a.createElement("label",null,"First Name"),l.a.createElement("input",{type:"text",name:"firstName",value:e.firstName,onChange:o}),a.firstName&&l.a.createElement("p",{className:"error"},a.firstName)),l.a.createElement("div",null,l.a.createElement("label",null,"Last Name"),l.a.createElement("input",{type:"text",name:"lastName",value:e.lastName,onChange:o}),a.lastName&&l.a.createElement("p",{className:"error"},a.lastName)),l.a.createElement("div",null,l.a.createElement("label",null,"Email"),l.a.createElement("input",{type:"email",name:"email",value:e.email,onChange:o}),a.email&&l.a.createElement("p",{className:"error"},a.email)),l.a.createElement("div",null,l.a.createElement("label",null,"Contact"),l.a.createElement("input",{type:"text",name:"contact",value:e.contact,onChange:o}),a.contact&&l.a.createElement("p",{className:"error"},a.contact)),l.a.createElement("div",null,l.a.createElement("label",null,"Password"),l.a.createElement("input",{type:"password",name:"password",value:e.password,onChange:o}),a.password&&l.a.createElement("p",{className:"error"},a.password)),l.a.createElement("div",null,l.a.createElement("label",null,"Confirm Password"),l.a.createElement("input",{type:"password",name:"confirmPassword",value:e.confirmPassword,onChange:o}),a.confirmPassword&&l.a.createElement("p",{className:"error"},a.confirmPassword)),l.a.createElement("button",{type:"submit"},"Register")))};a(29);var p=function(){const e=Object(s.q)(),t=JSON.parse(localStorage.getItem("user"));return Object(n.useEffect)(()=>{t&&e("/")},[t,e]),l.a.createElement("div",{className:"landing-container"},l.a.createElement("h1",null,"Welcome to Dashboard App"),l.a.createElement("p",null,"Your space to save notes and documents securely."),l.a.createElement("div",{className:"landing-buttons"},l.a.createElement(o.b,{to:"/login",className:"btn"},"Login"),l.a.createElement(o.b,{to:"/register",className:"btn"},"Register")))};a(30);var h=function(e){let{user:t,setUser:a}=e;const n=Object(s.q)();return l.a.createElement("div",{className:"header"},l.a.createElement("div",{className:"left"},l.a.createElement(o.b,{to:"/"},"Home")),l.a.createElement("div",{className:"right"},t?l.a.createElement(l.a.Fragment,null,l.a.createElement("span",{className:"welcome-message"},"Welcome, ".concat(t.firstName||t.email)),l.a.createElement("button",{className:"logout-btn",onClick:()=>{localStorage.removeItem("user"),a(null),n("/login",{replace:!0})}},"Logout")):l.a.createElement(l.a.Fragment,null,l.a.createElement(o.b,{to:"/login"},"Login"),l.a.createElement(o.b,{to:"/register"},"Register"))))};a(31);var g=function(){return l.a.createElement("footer",{className:"footer"},l.a.createElement("p",null,"\xa9 2024 Dashboard App. All rights reserved."),l.a.createElement("p",null,"This is a simple note and file storage application where users can save their memories securely."))};var b=function(){const[e,t]=Object(n.useState)(null);return Object(n.useEffect)(()=>{const e=function(){const e=localStorage.getItem("user");if(e)try{return JSON.parse(e)}catch(t){return console.error("Error parsing user from localStorage:",t),null}return null}();e&&t(e)},[]),l.a.createElement(o.a,null,l.a.createElement("div",{className:"app-container"},l.a.createElement(h,{user:e,setUser:t}),l.a.createElement(s.d,null,l.a.createElement(s.b,{path:"/",element:e?l.a.createElement(s.a,{to:"/home",replace:!0}):l.a.createElement(p,null)}),l.a.createElement(s.b,{path:"/home",element:e?l.a.createElement(u,null):l.a.createElement(s.a,{to:"/login",replace:!0})}),l.a.createElement(s.b,{path:"/login",element:e?l.a.createElement(s.a,{to:"/home",replace:!0}):l.a.createElement(d,{setUser:t})}),l.a.createElement(s.b,{path:"/register",element:e?l.a.createElement(s.a,{to:"/home",replace:!0}):l.a.createElement(E,{setUser:t})})),l.a.createElement(g,null)))};var f=e=>{e&&e instanceof Function&&a.e(3).then(a.bind(null,35)).then(t=>{let{getCLS:a,getFID:n,getFCP:l,getLCP:r,getTTFB:c}=t;a(e),n(e),l(e),r(e),c(e)})};c.a.createRoot(document.getElementById("root")).render(l.a.createElement(l.a.StrictMode,null,l.a.createElement(b,null))),f()}],[[15,1,2]]]);
//# sourceMappingURL=main.3475b0d6.chunk.js.map